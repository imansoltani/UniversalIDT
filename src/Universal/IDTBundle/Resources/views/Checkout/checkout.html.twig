{% extends '@UniversalIDT/layout.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/universalidt/dataTable/css/jquery.dataTables.min.css') }}" rel="stylesheet" />
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-8">
            <div class="widget stacked">
                <div class="widget-header">
                    <i class="icon-book"></i>
                    <h3>Checkout</h3>
                </div> <!-- /widget-header -->
                <div class="widget-content">
                    {{ form_start(form) }}
                    <div class="tabbable form-horizontal">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#deliveryTab" data-toggle="tab">Delivery method</a></li>
                            <li><a href="#paymentTab" data-toggle="tab">Payment method</a></li>
                            <li><a href="#orderTab" data-toggle="tab">Order review</a></li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="deliveryTab">
                                <h5>The PIN(s) will be deliver via:</h5>
                                <fieldset>
                                <div class="form-group">
                                    {{ form_label(form.email, "", {'label_attr': {'class': 'col-lg-4'} }) }}
                                    <div class="col-lg-8">
                                        {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
                                        {{ form_errors(form.email) }}
                                    </div> <!-- /col-lg-8 -->
                                </div> <!-- /form-group -->

                                <div class="form-group">
                                    {{ form_label(form.sms, "", {'label_attr': {'class': 'col-lg-4'} }) }}
                                    <div class="col-lg-8">
                                        {{ form_widget(form.sms, {'attr': {'class': 'form-control'}}) }}
                                        {{ form_errors(form.sms) }}
                                    </div> <!-- /col-lg-8 -->
                                </div> <!-- /form-group -->

                                <br>
                                <div class="form-actions">
                                    <a href="{{ path('WebPage_main') ~ '#basket' }}" class="btn btn-default">Back to basket</a>
                                    <button type="submit" class="btn btn-default pull-right next_tab">Continue to Payment method</button>
                                </div>
                                </fieldset>
                            </div>

                            <div class="tab-pane tab-row" id="paymentTab">

                                <fieldset>

                                <div class="form-group">
                                    {{ form_label(form.method, "", {'label_attr': {'class': 'col-lg-4'} }) }}
                                    <div class="col-lg-8">
                                        {% for method in form.method %}
                                            {{ form_widget(method) }}
                                            {{ form_label(method) }}
                                            {{ form_errors(method) }}
                                            <br>
                                        {% endfor %}
                                        {{ form_errors(form.method) }}
                                    </div> <!-- /col-lg-8 -->
                                </div> <!-- /form-group -->

<br>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn-default prev_tab">Back to Delivery method</button>
                                    <button type="submit" class="btn btn-default pull-right next_tab">Continue to Order Review</button>
                                </div>

                                </fieldset>
                            </div>

                            <div class="tab-pane" id="orderTab">
                                <table id="table" class="display" width="100%" cellspacing="0">
                                    <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Qty</th>
                                        <th>Denom.</th>
                                        <th>Subtitle</th>
                                    </tr>
                                    </thead>

                                    <tfoot>
                                    <tr>
                                        <th>Total</th>
                                        <th colspan="3"></th>
                                    </tr>
                                    </tfoot>

                                    <tbody>
                                    {% for row in data %}
                                        {% if row.type == "buy" %}
                                            <tr>
                                                <td>{{ row.product.name }}</td>
                                                <td>{{ row.count }}</td>
                                                <td>{{ row.denomination }}</td>
                                                <td>{{ row.product.AllGeneralInformation }}</td>
                                            </tr>
                                        {% endif %}
                                    {% endfor %}
                                    </tbody>
                                </table>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn-default prev_tab">Back to Payment Method</button>
                                    {{ form_widget(form.submit, {'attr': {'class': 'btn btn-primary pull-right'}}) }}
                                </div>
                            </div>
                        </div>


                    </div>

                    {{ form_end(form) }}
                </div> <!-- /widget-content -->

            </div> <!-- /widget -->
        </div>

        <div class="col-md-4">
            <div class="widget stacked">

                <div class="widget-header">
                    <h3>Order summary</h3>
                </div> <!-- /widget-header -->

                <div class="widget-content">
                    <p>Tax is ...</p>
                    <table class="table table-hover input-mini">
                        <tbody>
                        <tr>
                            <td>Order subtotal</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Tax</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Delivery method</td>
                            <td>Email</td>
                        </tr>
                        <tr class="info">
                            <td><b>Total</b></td>
                            <td></td>
                        </tr>
                        </tbody>
                    </table>
                </div> <!-- /widget-content -->

            </div> <!-- /widget -->
        </div>
    </div>
{% endblock content %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset("bundles/universalidt/dataTable/js/jquery.dataTables.min.js") }}"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#table').DataTable({
                "paging":   false,
                "info":     false,
                "bFilter":   false
            });

            var $tabs = $('.tabbable li');

            $('.prev_tab').on('click', function() {
                $tabs.filter('.active').prev('li').find('a[data-toggle="tab"]').tab('show');
            });

            $('.next_tab').on('click', function() {
                $tabs.filter('.active').next('li').find('a[data-toggle="tab"]').tab('show');
            });
        } );
    </script>
{% endblock javascripts %}

